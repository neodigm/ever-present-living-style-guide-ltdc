<section class="row">
    <div class="columns small-12">
        <p class="caption--p__roboto text-center">Pattern: Responsive Imagery</p>
        <hr>
    </div>
</section>
<section class="row">
    <div class="columns small-12 medium-12 large-4">
        <p class="caption--p__roboto text-center">Problem</p>
        <hr>
        <p class="article--p__roboto text-center">Request image alternatives based on device type.</p>
    </div>
    <div class="columns small-12 medium-6 large-4">
        <p class="caption--p__roboto text-center">Solution</p>
        <hr>
        <p class="article--p__roboto text-center">Download images based on the device viewport size without client-side script. Utilize the browsers native ability to conditionally initiate image requests based on media query conditions.</p>
    </div>
    <div class="columns small-12 medium-6 large-4">
        <p class="caption--p__roboto text-center">Reference</p>
        <hr>
        <a href="http://ericportis.com/posts/2014/srcset-sizes/" target="_blank"
        class="button extended hollow">Srcset and sizes</a>
        <a href="http://alistapart.com/article/responsive-images-in-practice" target="_blank"
        class="button extended hollow">Responsive Images in Practice</a>
    </div>
</section>

<section class="row">
    <br>
    <div class="columns small-12 medium-12">
        <p class="caption--p__roboto text-center">Generate SRCSET syntax from Interchange element</p>
    </div>
    <hr>
</section>
<section class="row">
    <article class="columns small-12 medium-4">
        <textarea id="js-srcsetgen--textarea__interchange" class="js-srcsetgen--textarea" placeholder="Paste Interchange Element (client script)"
        rows="4" cols="48"></textarea>
        <a class="js-srcsetgen--a__gen button small extended hollow">Generate SRCSET</a>

    </article>
    <article class="columns small-12 medium-4">

        <section class="row">
            <aside class="columns small-12 callout success">
            <h4 class="">Image Candidate(s)</h4>
            </aside>
            <div id="js-imgcand--div">

            </div>
        </section>
        
    </article>
    <article class="columns small-12 medium-4">
        <textarea id="js-srcsetgen--textarea__srcset" class="js-srcsetgen--textarea" placeholder="SRCSET / Size syntax"
        rows="4" cols="48"></textarea>
        <a class="js-srcsetgen--a__copy button small extended hollow">Copy</a>
    </article>
</section>

<section class="row">
    <div class="columns small-12 medium-12">
        <br>
        <p class="caption--p__roboto text-center">Unit Test</p>
        <hr>
    </div>
	<aside class="columns small-12">
<pre>
<code class="language-javascript">$(document).on('replace', 'img', function (e, new_path, original_path) {
    console.groupCollapsed("intrch |");
        console.log(e.currentTarget);
        console.log(new_path);
        console.log(original_path);
    console.groupEnd();
});
$("img").on("load", function(){
    imageLoaded( this );
});
function imageLoaded(image) {
    if(image.src !== image.currentSrc){
        console.groupCollapsed("imgload |");
            console.log("img.src        | " + image.src);
            console.log("img.currentSrc | " + image.currentSrc);
            console.log("img.NaturalDim | w:" + image.naturalWidth + " h:" + image.naturalHeight );
        console.groupEnd();
    }
}</code>
</pre>
	</aside>
<template id="js-sample-interchange--template"><img class="item-img" border="0" alt="Moroccan Lattice Accent Stools" data-interchange="[http://media.ltdcommodities.com/images/product/53183_mn.jpg, (small)], [http://media.ltdcommodities.com/images/product/53183_th.jpg, (medium)], [http://media.ltdcommodities.com/images/product/53183_mn.jpg, (large)]" data-uuid="interchange-imlcxog63w" src="http://media.ltdcommodities.com/images/product/53183_mn.jpg">
</template>
<template id="js-imgcand--template">
<aside class="columns small-12 callout success">
|url| Xw <span>(x)</span><br>
|nat_w|<br>
|nat_h|<br>
</aside>
</template>
<template id="js-script">
$("#js-srcsetgen--textarea__interchange").val( $("#js-sample-interchange--template").html() );
$(".js-srcsetgen--a__copy").on("click", function(){
    var eSyntax = document.querySelector("#js-srcsetgen--textarea__srcset");  
    eSyntax.select();
    console.log("clip copy | " + document.execCommand('copy') );
});
$(".js-srcsetgen--a__gen").on("click", function(){
//    populate js-imgcand--div from js-imgcand--template
var aImgCand = [];
aImgCand.push({"target": "http", "source": "url"});
$("#js-imgcand--div").html( popuTemplate("js-imgcand--template", aImgCand ) );
    
});
function popuTemplate(sTemplate_id, aContents){
    //    Return a string after swapping an assn array (objects)
    //    replacing pipe delm tokens in the template html
    //    If all the tokens have been replaced but there is still data in 
    //    the contents array then get a new copy of the template.
    if( aContents.length > 0){
        var $oTempl = $("#" + sTemplate_id);
        var sMUout = ""; //  Might contain more than one template html
        var sMUprc = $oTempl.html(); // In process string
        for(var iC=0; iC < aContents.length; iC++){
            sMUprc = sMUprc.split( ("|"+aContents[iC].target+"|") ).join( aContents[iC].source );
        }
        sMUout += sMUprc;
        return sMUout;
    }else{
        return "";
    }
}
</template>
</section>